<nav>
  <a routerLink="/">Back Home</a>
</nav>

<form [formGroup]="recordForm" (ngSubmit)="onSubmit()" class="record-form">
  <mat-form-field
    class="record-form-field"
    [class.mat-form-field-invalid]="
      recordForm.get('title')?.invalid &&
      (recordForm.get('title')?.dirty || recordForm.get('title')?.touched)
    "
  >
    <mat-label>Title</mat-label>
    <input matInput formControlName="title" />

    <mat-error
      *ngIf="recordForm.get('title')?.errors?.['required'] && (recordForm.get('title')?.dirty || recordForm.get('title')?.touched) && !recordForm.get('title')?.pristine"
    >
      Title is required
    </mat-error>
    <mat-error *ngIf="recordForm.get('title')?.errors?.['minlength']">
      Title must be at least 2 characters
    </mat-error>
  </mat-form-field>

  <mat-form-field
    class="record-form-field"
    [class.mat-form-field-invalid]="
      recordForm.get('artist')?.invalid &&
      (recordForm.get('artist')?.dirty || recordForm.get('artist')?.touched)
    "
  >
    <mat-label>Artist</mat-label>
    <input matInput formControlName="artist" />

    <mat-error
      *ngIf="recordForm.get('artist')?.errors?.['required'] && (recordForm.get('artist')?.dirty || recordForm.get('artist')?.touched) && !recordForm.get('artist')?.pristine"
    >
      Artist is required
    </mat-error>

    <mat-error *ngIf="recordForm.get('artist')?.errors?.['minlength']">
      Artist must be at least 2 characters
    </mat-error>
  </mat-form-field>

  <mat-form-field
    class="record-form-field"
    [class.mat-form-field-invalid]="
      recordForm.get('genre')?.invalid &&
      (recordForm.get('genre')?.dirty || recordForm.get('genre')?.touched)
    "
  >
    <mat-label>Genre</mat-label>
    <input matInput formControlName="genre" />

    <mat-error
      *ngIf="recordForm.get('genre')?.errors?.['required'] && (recordForm.get('genre')?.dirty || recordForm.get('genre')?.touched) && !recordForm.get('genre')?.pristine"
    >
      Genre is required
    </mat-error>

    <mat-error *ngIf="recordForm.get('genre')?.errors?.['minlength']">
      Genre must be at least 2 characters
    </mat-error>
  </mat-form-field>

  <mat-form-field
    class="record-form-field"
    [class.mat-form-field-invalid]="
      recordForm.get('year')?.invalid &&
      (recordForm.get('year')?.dirty || recordForm.get('year')?.touched)
    "
  >
    <mat-label>Year</mat-label>
    <input matInput formControlName="year" />

    <mat-error
      *ngIf="recordForm.get('year')?.errors?.['required'] && (recordForm.get('year')?.dirty || recordForm.get('year')?.touched) && !recordForm.get('year')?.pristine"
    >
      Year is required
    </mat-error>

    <mat-error *ngIf="recordForm.get('year')?.errors?.['minlength']">
      Year must be at least 4 digits
    </mat-error>
    <mat-error *ngIf="recordForm.get('year')?.errors?.['pattern']">
      Year must be a valid number
    </mat-error>
  </mat-form-field>

  <mat-form-field
    class="record-form-field"
    [class.mat-form-field-invalid]="
      recordForm.get('condition')?.invalid &&
      (recordForm.get('condition')?.dirty ||
        recordForm.get('condition')?.touched)
    "
  >
    <mat-label>Condition</mat-label>
    <input matInput formControlName="condition" />

    <mat-error
      *ngIf="recordForm.get('condition')?.errors?.['required'] && (recordForm.get('condition')?.dirty || recordForm.get('condition')?.touched) && !recordForm.get('condition')?.pristine"
    >
      Condition is required
    </mat-error>

    <mat-error *ngIf="recordForm.get('condition')?.errors?.['minlength']">
      Condition must be at least 2 characters
    </mat-error>
  </mat-form-field>

  <mat-form-field
    class="record-form-field"
    [class.mat-form-field-invalid]="
      recordForm.get('price')?.invalid &&
      (recordForm.get('price')?.dirty || recordForm.get('price')?.touched)
    "
  >
    <mat-label>Price</mat-label>
    <input matInput formControlName="price" />

    <mat-error
      *ngIf="recordForm.get('price')?.errors?.['required'] && (recordForm.get('price')?.dirty || recordForm.get('price')?.touched) && !recordForm.get('price')?.pristine"
    >
      Price is required
    </mat-error>
  </mat-form-field>

  <input
    type="file"
    (change)="onFileChange($event)"
    formControlName="image"
    #fileInput
  />

  <button
    mat-raised-button
    color="primary"
    type="submit"
    [disabled]="!recordForm.valid"
    class="submit-button"
  >
    Submit
  </button>
</form>
